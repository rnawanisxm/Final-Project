{"version":3,"file":"cog-pyramid.js","mappings":"4nCAWA,IAAMA,EAAW,IAAIC,EAAAA,EAAS,CAC5BC,OAAQ,EAAE,IAAK,IACfC,YAAa,CAAC,QAAU,SAAW,UAAY,WAAc,aAC7DC,UAAW,CACT,CAAC,IAAK,KACN,CAAC,KAAM,KACP,CAAC,KAAM,MACP,CAAC,KAAM,MACP,CAAC,KAAM,SAILC,EAAU,IAAIC,EAAAA,EACdC,EAAc,GACdC,EAAKR,EAASS,iBAAiBC,OAErC,SAASC,EAASC,EAAGC,EAAGC,GACtB,IAAMC,EAAM,yDAAH,OAA4DH,EAA5D,YAAiEE,EAAjE,YAAsED,EAAtE,QACHE,KAAOR,IACXF,EAAQW,YAAYC,KAClB,IAAIC,EAAAA,EAAe,CACjBC,QAASP,EACTQ,QAAe,IAANR,GAAWA,IAAMJ,EAAK,OAAIa,EAAYT,EAAI,EACnDU,OAAQtB,EAASuB,mBAAmB,CAACX,EAAGC,EAAGC,IAC3CU,OAAQ,IAAIC,EAAAA,EAAQ,CAClBC,QAAS,CACP,CACEX,IAAKA,SAMfR,EAAYQ,IAAO,GAIvB,IAAMY,EAAM,IAAIC,EAAAA,EAAI,CAClBC,OAAQ,MACRC,OAAQ,CAACzB,GACT0B,KAAM,IAAIC,EAAAA,GAAK,CACbC,WAAY,YACZC,OAAQ,CAAC,EAAG,GACZC,KAAM,EACNC,gBAAgB,MAKpBzB,EAAS,EAAG,EAAG,GAGfgB,EAAIU,GAAG,WAAW,WAChB,IAAMN,EAAOJ,EAAIW,UACjBtC,EAASuC,kBACPC,EAAAA,EAAAA,IAAgB,EAAE,KAAM,GAAI,IAAK,IAAKT,EAAKU,mBAC3CzC,EAAS0C,kBAAkBX,EAAKY,kBAChC,gCAAehC,EAAf,wB","sources":["webpack:///./cog-pyramid.js"],"sourcesContent":["import GeoTIFF from '../src/ol/source/GeoTIFF.js';\nimport LayerGroup from '../src/ol/layer/Group.js';\nimport Map from '../src/ol/Map.js';\nimport TileGrid from '../src/ol/tilegrid/TileGrid.js';\nimport View from '../src/ol/View.js';\nimport WebGLTileLayer from '../src/ol/layer/WebGLTile.js';\nimport {getIntersection} from '../src/ol/extent.js';\n\n// Metadata from https://s2downloads.eox.at/demo/EOxCloudless/2019/rgb/2019_EOxCloudless_rgb.json\n\n// Tile grid of the GeoTIFF pyramid layout\nconst tileGrid = new TileGrid({\n  origin: [-180, 90],\n  resolutions: [0.703125, 0.3515625, 0.17578125, 8.7890625e-2, 4.39453125e-2],\n  tileSizes: [\n    [512, 256],\n    [1024, 512],\n    [2048, 1024],\n    [4096, 2048],\n    [4096, 4096],\n  ],\n});\n\nconst pyramid = new LayerGroup();\nconst layerForUrl = {};\nconst zs = tileGrid.getResolutions().length;\n\nfunction useLayer(z, x, y) {\n  const url = `https://s2downloads.eox.at/demo/EOxCloudless/2019/rgb/${z}/${y}/${x}.tif`;\n  if (!(url in layerForUrl)) {\n    pyramid.getLayers().push(\n      new WebGLTileLayer({\n        minZoom: z,\n        maxZoom: z === 0 || z === zs - 1 ? undefined : z + 1,\n        extent: tileGrid.getTileCoordExtent([z, x, y]),\n        source: new GeoTIFF({\n          sources: [\n            {\n              url: url,\n            },\n          ],\n        }),\n      })\n    );\n    layerForUrl[url] = true;\n  }\n}\n\nconst map = new Map({\n  target: 'map',\n  layers: [pyramid],\n  view: new View({\n    projection: 'EPSG:4326',\n    center: [0, 0],\n    zoom: 0,\n    showFullExtent: true,\n  }),\n});\n\n// Add overview layer\nuseLayer(0, 0, 0);\n\n// Add layer for specific extent on demand\nmap.on('moveend', () => {\n  const view = map.getView();\n  tileGrid.forEachTileCoord(\n    getIntersection([-180, -90, 180, 90], view.calculateExtent()),\n    tileGrid.getZForResolution(view.getResolution()),\n    ([z, x, y]) => useLayer(z, x, y)\n  );\n});\n"],"names":["tileGrid","TileGrid","origin","resolutions","tileSizes","pyramid","LayerGroup","layerForUrl","zs","getResolutions","length","useLayer","z","x","y","url","getLayers","push","WebGLTileLayer","minZoom","maxZoom","undefined","extent","getTileCoordExtent","source","GeoTIFF","sources","map","Map","target","layers","view","View","projection","center","zoom","showFullExtent","on","getView","forEachTileCoord","getIntersection","calculateExtent","getZForResolution","getResolution"],"sourceRoot":""}