{"version":3,"file":"sea-level.js","mappings":"4KAuBA,IAAMA,EAAM,oCAKNC,EAAY,IAAIC,EAAAA,EAAU,CAC9BC,OAAQ,IAAIC,EAAAA,EAAI,CACdC,IACE,kEAAoEL,EACtEM,QAAS,GACTC,YAAa,OAGjBN,EAAUO,GAAG,aAAa,SAAUC,GAClCA,EAAIC,QAAQC,uBAAwB,EACpCF,EAAIC,QAAQE,yBAA0B,KAGxC,IAAMC,EAAS,IAAIC,EAAAA,GAAa,CAC9BC,QAAS,CAACd,GACVe,UArCF,SAAeC,EAAQC,GACrB,IAAMC,EAAQF,EAAO,GAarB,OAZIE,EAAM,KAEwD,IAAzC,IAAXA,EAAM,GAAW,IAAiB,IAAXA,EAAM,GAAWA,EAAM,IAAvD,KACWD,EAAKE,OACjBD,EAAM,GAAK,IACXA,EAAM,GAAK,IACXA,EAAM,GAAK,IACXA,EAAM,GAAK,KAEXA,EAAM,GAAK,GAGRA,KA0BHE,EAAM,IAAIC,EAAAA,EAAI,CAClBC,OAAQ,MACRC,OAAQ,CACN,IAAItB,EAAAA,EAAU,CACZC,OAAQ,IAAIC,EAAAA,EAAI,CACdqB,aA1BN,4LA2BMpB,IAAK,6DAA+DL,EACpE0B,SAAU,QAGd,IAAIC,EAAAA,EAAW,CACbC,QAAS,GACTzB,OAAQU,KAGZgB,KAAM,IAAIC,EAAAA,GAAK,CACbC,QAAQC,EAAAA,EAAAA,IAAW,EAAE,SAAU,UAC/BC,KAAM,OAIJC,EAAUC,SAASC,eAAe,SAClCC,EAASF,SAASC,eAAe,UACjCE,EAAW,WACfD,EAAOE,UAAYL,EAAQM,MAC3B3B,EAAO4B,WAETP,EAAQQ,iBAAiB,QAASJ,GAClCJ,EAAQQ,iBAAiB,SAAUJ,GACnCD,EAAOE,UAAYL,EAAQM,MAE3B3B,EAAOL,GAAG,oBAAoB,SAAUmC,GACtCA,EAAMzB,KAAKE,MAAQc,EAAQM,SAI7B,IADA,IAAMI,EAAYT,SAASU,uBAAuB,YACzCC,EAAI,EAAGC,EAAKH,EAAUI,OAAQF,EAAIC,IAAMD,EAC/CF,EAAUE,GAAGJ,iBAAiB,QAASO,GAGzC,SAASA,EAASN,GAChB,IAAMzB,EAAOyB,EAAMpB,OAAO2B,QACpBrB,EAAOR,EAAI8B,UACjBtB,EAAKuB,WAAUpB,EAAAA,EAAAA,IAAWd,EAAKa,OAAOsB,MAAM,KAAKhC,IAAIiC,UACrDzB,EAAK0B,QAAQD,OAAOpC,EAAKe,U","sources":["webpack:///./sea-level.js"],"sourcesContent":["import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport {Image as ImageLayer, Tile as TileLayer} from '../src/ol/layer.js';\nimport {Raster as RasterSource, XYZ} from '../src/ol/source.js';\nimport {fromLonLat} from '../src/ol/proj.js';\n\nfunction flood(pixels, data) {\n  const pixel = pixels[0];\n  if (pixel[3]) {\n    const height =\n      -10000 + (pixel[0] * 256 * 256 + pixel[1] * 256 + pixel[2]) * 0.1;\n    if (height <= data.level) {\n      pixel[0] = 134;\n      pixel[1] = 203;\n      pixel[2] = 249;\n      pixel[3] = 255;\n    } else {\n      pixel[3] = 0;\n    }\n  }\n  return pixel;\n}\n\nconst key = 'get_your_own_D6rA4zTHduk6KOKTXzGB';\nconst attributions =\n  '<a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a> ' +\n  '<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>';\n\nconst elevation = new TileLayer({\n  source: new XYZ({\n    url:\n      'https://api.maptiler.com/tiles/terrain-rgb/{z}/{x}/{y}.png?key=' + key,\n    maxZoom: 10,\n    crossOrigin: '',\n  }),\n});\nelevation.on('prerender', function (evt) {\n  evt.context.imageSmoothingEnabled = false;\n  evt.context.msImageSmoothingEnabled = false;\n});\n\nconst raster = new RasterSource({\n  sources: [elevation],\n  operation: flood,\n});\n\nconst map = new Map({\n  target: 'map',\n  layers: [\n    new TileLayer({\n      source: new XYZ({\n        attributions: attributions,\n        url: 'https://api.maptiler.com/maps/streets/{z}/{x}/{y}.png?key=' + key,\n        tileSize: 512,\n      }),\n    }),\n    new ImageLayer({\n      opacity: 0.6,\n      source: raster,\n    }),\n  ],\n  view: new View({\n    center: fromLonLat([-122.3267, 37.8377]),\n    zoom: 11,\n  }),\n});\n\nconst control = document.getElementById('level');\nconst output = document.getElementById('output');\nconst listener = function () {\n  output.innerText = control.value;\n  raster.changed();\n};\ncontrol.addEventListener('input', listener);\ncontrol.addEventListener('change', listener);\noutput.innerText = control.value;\n\nraster.on('beforeoperations', function (event) {\n  event.data.level = control.value;\n});\n\nconst locations = document.getElementsByClassName('location');\nfor (let i = 0, ii = locations.length; i < ii; ++i) {\n  locations[i].addEventListener('click', relocate);\n}\n\nfunction relocate(event) {\n  const data = event.target.dataset;\n  const view = map.getView();\n  view.setCenter(fromLonLat(data.center.split(',').map(Number)));\n  view.setZoom(Number(data.zoom));\n}\n"],"names":["key","elevation","TileLayer","source","XYZ","url","maxZoom","crossOrigin","on","evt","context","imageSmoothingEnabled","msImageSmoothingEnabled","raster","RasterSource","sources","operation","pixels","data","pixel","level","map","Map","target","layers","attributions","tileSize","ImageLayer","opacity","view","View","center","fromLonLat","zoom","control","document","getElementById","output","listener","innerText","value","changed","addEventListener","event","locations","getElementsByClassName","i","ii","length","relocate","dataset","getView","setCenter","split","Number","setZoom"],"sourceRoot":""}